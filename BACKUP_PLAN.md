# üíæ Backup & Recovery Plan
‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡∏£‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏Å‡∏π‡πâ‡∏Ñ‡∏∑‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö "IT Support Ticket System"

## 1. üéØ What to Back Up (‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏≥‡∏£‡∏≠‡∏á)
‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç 2 ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏≥‡∏£‡∏≠‡∏á:

1.  **Database (‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•):**
    * **‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•:** ‡∏ï‡∏≤‡∏£‡∏≤‡∏á 'users', 'tickets', 'categories', 'comments', 'knowledge_base', 'audit_logs' ‡∏Ø‡∏•‡∏Ø
    * **‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà:** MySQL Database (‡πÄ‡∏ä‡πà‡∏ô 'it_support_prod')

2.  **User Files (‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏ô‡∏ö):**
    * **‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•:** ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÅ‡∏•‡∏∞‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î (‡πÄ‡∏ä‡πà‡∏ô ‡∏£‡∏π‡∏õ‡πÅ‡∏°‡∏ß, ‡∏£‡∏π‡∏õ SSD)
    * **‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà:** 'backend/storage/app/public'

## 2. üìÖ Backup Plan (‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•)
‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ "Cron Job" (Task Scheduler ‡∏Ç‡∏≠‡∏á Linux) ‡πÉ‡∏´‡πâ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ **‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏∑‡∏ô (‡πÄ‡∏ä‡πà‡∏ô ‡∏ï‡∏µ 2)**

### 2.1. Database Backup (MySQL)
* **‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á:** ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÉ‡∏ä‡πâ 'mysqldump' ‡πÄ‡∏û‡∏∑‡πà‡∏≠ Export ‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏Å‡πâ‡∏≠‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏ü‡∏•‡πå '.sql'
    ---bash
    mysqldump -u [prod_user] -p[Your-Secure-Password] it_support_prod > /path/to/backups/db/it-support-db-$(date +%F).sql
    ---

    *('$(date +%F)' ‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏ä‡πà‡∏ô 'it-support-db-2025-11-08.sql')*

### 2.2. Files Backup (Storage)
* **‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á:** ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÉ‡∏ä‡πâ 'tar' ‡πÄ‡∏û‡∏∑‡πà‡∏≠ "‡∏ö‡∏µ‡∏ö‡∏≠‡∏±‡∏î" ‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå 'storage/app/public' ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
    ---bash
    tar -czvf /path/to/backups/files/it-support-files-$(date +%F).tar.gz /var/www/it-support-backend/storage/app/public
    ---

    *('c'=create, 'z'=zip, 'v'=verbose, 'f'=file)*

### 2.3. Off-site Storage (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç!)
* ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå Backup (.sql ‡πÅ‡∏•‡∏∞ .tar.gz) ‡πÅ‡∏•‡πâ‡∏ß, ‡∏Ñ‡∏ß‡∏£‡∏™‡∏±‡πà‡∏á 'rclone' (‡∏´‡∏£‡∏∑‡∏≠ 'aws s3 cp') ‡πÄ‡∏û‡∏∑‡πà‡∏≠ "‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å" ‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ‡πÑ‡∏õ‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ‡∏ó‡∏µ‡πà "Off-site Storage" (‡πÄ‡∏ä‡πà‡∏ô S3, Backblaze, Google Cloud Storage) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô Server ‡∏•‡πà‡∏°‡∏´‡∏£‡∏∑‡∏≠‡∏ñ‡∏π‡∏Å‡πÅ‡∏Æ‡∏Å

## 3. üöë Recovery Plan (‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡∏Å‡∏π‡πâ‡∏Ñ‡∏∑‡∏ô)
‡πÉ‡∏ô‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà Server ‡∏•‡πà‡∏° ‡∏´‡∏£‡∏∑‡∏≠‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏ñ‡∏≤‡∏ß‡∏£:

1.  **Deploy ‡πÉ‡∏´‡∏°‡πà:** ‡∏ó‡∏≥‡∏ï‡∏≤‡∏° 'DEPLOYMENT_GUIDE.md' (‡∏Ç‡πâ‡∏≠ 1-4) ‡∏à‡∏ô‡∏ñ‡∏∂‡∏á‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ Server ‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà "‡∏™‡∏∞‡∏≠‡∏≤‡∏î" (Clean)
2.  **(‡∏´‡∏¢‡∏∏‡∏î)** **‡∏≠‡∏¢‡πà‡∏≤** ‡∏£‡∏±‡∏ô 'php artisan migrate'

### 2.1. ‡∏Å‡∏π‡πâ‡∏Ñ‡∏∑‡∏ô Files (Storage)
1.  ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå Backup ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î (‡πÄ‡∏ä‡πà‡∏ô 'it-support-files-2025-11-07.tar.gz') ‡∏à‡∏≤‡∏Å Off-site Storage ‡∏°‡∏≤‡∏ó‡∏µ‡πà Server ‡πÉ‡∏´‡∏°‡πà
2.  "‡πÅ‡∏ï‡∏Å‡πÑ‡∏ü‡∏•‡πå" (Unzip) ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏¢‡∏±‡∏á "‡∏ó‡∏µ‡πà‡πÄ‡∏î‡∏¥‡∏°":
    ---bash
    # (‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡πÅ‡∏ï‡∏Å‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏ó‡∏µ‡πà /var/www/it-support-backend/storage/app/public)
    tar -xzvf /path/to/backups/files/it-support-files-2025-11-07.tar.gz -C /
    ---

3.  (‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Permissions ‡∏Ç‡∏≠‡∏á‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡∏Å‡∏π‡πâ‡∏°‡∏≤)

### 2.2. ‡∏Å‡∏π‡πâ‡∏Ñ‡∏∑‡∏ô Database (MySQL)
1.  ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå Backup ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î (‡πÄ‡∏ä‡πà‡∏ô 'it-support-db-2025-11-07.sql')
2.  ‡∏™‡∏£‡πâ‡∏≤‡∏á Database "‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏õ‡∏•‡πà‡∏≤" (Clean) ‡∏ö‡∏ô MySQL Server:
    ---sql
    CREATE DATABASE it_support_prod;
    ---

3.  "Import" ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ:
    ---bash
    mysql -u [prod_user] -p[Your-Secure-Password] it_support_prod < /path/to/backups/db/it-support-db-2025-11-07.sql
    ---

4.  **Restart** Queue Worker:
    ---bash
    sudo supervisorctl restart all
    ---
    
5.  **‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏£‡∏∞‡∏ö‡∏ö:** ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ó‡∏µ‡πà 'app.your-domain.com' ‡πÅ‡∏•‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô